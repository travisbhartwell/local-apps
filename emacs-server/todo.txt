TODO:
- use traps to clean up things
- better command line parameter handling


